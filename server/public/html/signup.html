<html>
    <head>
        <title>Faculty Recruitment | Login</title>
        <link href="/css/bootstrap.css" rel="stylesheet">
        <link rel="stylesheet" href="/css/font-awesome-4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="/css/signup.css">
        <script type="text/javascript" src="/js/jquery-2.1.1.min.js"></script>
        <script type="text/javascript" src="/js/popper.min.js"></script>
        <script type="text/javascript" src="/js/bootstrap.min.js"></script>
    </head>
    <body>
        <div class="top_banner">board here</div>
        <div class="signup_board col-6">
            <h2 class="header">Register</h2>
            <hr>
            <p class="global_alert alert"></p>
            <div class="email_id_box">
                <span><label class="col-2">Email-id </label> <input type="text" class="col-4 emailId" name="emailId" placeholder="Enter email-id here"></span>
                <p class="alert alert_email"></p>
            </div>
            <div class="name_box">
                <span><label class="col-2">Name </label> <input type="text" class="col-4 name" name="name" placeholder="Enter full name here"></span>
                <p class="alert alert_name"></p>
            </div>
            <div class="password_box">
                <span><label class="col-2">Password </label><input type="password" class="col-4  password" name="password" placeholder="Enter password here"></span>
                <p class="alert alert_password"></p>
            </div>
            <button class="btn submit btn-primary">SIGNUP</button>
            <br>
        </div>
        <div class="footer"></div>
    </body>
    <script>
        $(document).ready(()=>{
            let $globalAlert = $('.global_alert');
            let $emailId = $('.emailId');
            let $name = $('.name');
            let $password = $('.password');
            let $alert_email = $('.alert_email');
            let $alert_password = $('.alert_password');
            $emailId.focus(()=>{
                $('.alert').html('');
            })
            $password.focus(()=>{
                $('.alert').html('');
            })
            $('.submit').click(()=>{
                let $emailIdValue = $emailId.val();
                let $passwordValue = $password.val();
                let $nameValue = $name.val();
                console.log("Button clicked!");
                if($emailIdValue && $passwordValue){
                    let r = $.ajax({
                        method:'POST',
                        url:'http://localhost:3000/users/register',
                        data:{
                            emailId:$emailIdValue,
                            password:$passwordValue,
                            name:$nameValue
                        }
                    }).done((data)=>{
                        if(data.success){
                            //to a message asking to activate account
                            location.href = '/users/dashboard';
                        }else{
                            $globalAlert.html(data.message);
                            setTimeout(()=>{
                                $globalAlert.html('');
                            }, 5000)
                        }
                        document.cookie = '';
                        //r.status
                    });

                }
                if(!$emailIdValue){
                    console.log("No email.");
                    $alert_email.html("Email-id can't be empty!");
                }
                if(!$passwordValue){
                    console.log("No password")
                    $alert_password.html("Password can't be empty!");
                }
                if(!$nameValue){
                    console.log("No name")
                    $alert_password.html("Name field can't be empty!");
                }
            })
        })
    </script>
</html>